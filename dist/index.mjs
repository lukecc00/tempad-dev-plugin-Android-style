function f(t){return t}function d(t,o="dp"){if(!t)return"";if(t.endsWith("%"))return t;const n=t.match(/^(-?[\d.]+)px$/);return n?`${Number.parseFloat(n[1])}${o}`:t}function s(t,o){const n=o.split(/\s+/).filter(Boolean),a={},e={};return n.length===1?e.top=e.right=e.bottom=e.left=n[0]:n.length===2?(e.top=e.bottom=n[0],e.right=e.left=n[1]):n.length===3?(e.top=n[0],e.right=e.left=n[1],e.bottom=n[2]):n.length===4&&(e.top=n[0],e.right=n[1],e.bottom=n[2],e.left=n[3]),n.length===1?(t==="padding"&&(a["android:padding"]=d(n[0],"dp")),t==="margin"&&(a["android:layout_margin"]=d(n[0],"dp"))):(e.top&&(a[t==="padding"?"android:paddingTop":"android:layout_marginTop"]=d(e.top,"dp")),e.bottom&&(a[t==="padding"?"android:paddingBottom":"android:layout_marginBottom"]=d(e.bottom,"dp")),e.left&&(a[t==="padding"?"android:paddingStart":"android:layout_marginStart"]=d(e.left,"dp")),e.right&&(a[t==="padding"?"android:paddingEnd":"android:layout_marginEnd"]=d(e.right,"dp"))),a}function p(t){if(t["overflow-y"]==="scroll"||t["overflow-y"]==="auto")return"ScrollView";if(t["overflow-x"]==="scroll"||t["overflow-x"]==="auto")return"HorizontalScrollView";if(t["box-shadow"])return"androidx.cardview.widget.CardView";if(t["background-image"]&&t["background-image"].includes("url")||t["object-fit"])return"ImageView";if(t.display==="flex")return"LinearLayout";if(t["font-family"]||t.color||t["font-size"]||t["text-align"]||t["line-height"]||t["text-overflow"])return"TextView";const o=t.width||t.height,n=t.background||t["background-color"],a=t.padding||t.display;return o&&n&&!a?"View":"RelativeLayout"}function u(t,o){const n={};if(t.width){let r=t.width;r==="100%"?r="match_parent":r==="auto"?r="wrap_content":r=d(r,"dp"),n["android:layout_width"]=r}if(t.height){let r=t.height;r==="100%"?r="match_parent":r==="auto"?r="wrap_content":r=d(r,"dp"),n["android:layout_height"]=r}t["max-width"]&&(n["android:maxWidth"]=d(t["max-width"],"dp")),t["min-width"]&&(n["android:minWidth"]=d(t["min-width"],"dp")),t["max-height"]&&(n["android:maxHeight"]=d(t["max-height"],"dp")),t["min-height"]&&(n["android:minHeight"]=d(t["min-height"],"dp"));const a=o.includes("CardView"),e=a?"app:cardBackgroundColor":"android:background";if(t["background-color"])n[e]=t["background-color"];else if(t.background&&t.background.startsWith("var(")){const r=t.background.match(/var\(--([a-zA-Z0-9_-]+)\)/);r?n[e]=`@drawable/${r[1]}`:n[e]="@drawable/bg_placeholder"}if(o==="TextView"){if(t.color&&(n["android:textColor"]=t.color),t["font-size"]&&(n["android:textSize"]=d(t["font-size"],"sp")),t["font-weight"]&&(t["font-weight"]==="bold"||Number.parseInt(t["font-weight"])>=700)&&(n["android:textStyle"]="bold"),t["text-align"]){const r=t["text-align"];let i="";r==="center"?i="center_horizontal":r==="right"?i="end":r==="left"&&(i="start"),n["android:gravity"]=i}if(t["line-height"]){const r=t["line-height"].match(/^(-?[\d.]+)px$/),i=t["font-size"]?.match(/^(-?[\d.]+)px$/);if(r&&i){const l=Number.parseFloat(r[1]),g=Number.parseFloat(i[1]),c=l-g;c>0&&(n["android:lineSpacingExtra"]=`${c}sp`,n["android:translationY"]=`-${c/2}sp`)}}t["text-overflow"]==="ellipsis"&&(n["android:ellipsize"]="end",t["white-space"]==="nowrap"&&(n["android:maxLines"]="1"))}if(t.padding){const r=s("padding",t.padding);Object.assign(n,r)}if(t.margin){const r=s("margin",t.margin);Object.assign(n,r)}if(t.opacity&&(n["android:alpha"]=t.opacity),t["border-radius"]){const r=d(t["border-radius"],"dp");a?n["app:cardCornerRadius"]=r:(n["android:clipToOutline"]="true",n["android:background"]||(n["android:background"]="@drawable/bg_rounded"))}if(t["box-shadow"]&&(a?n["app:cardElevation"]="4dp":n["android:elevation"]="4dp"),o==="LinearLayout"&&(t["flex-direction"]==="column"?n["android:orientation"]="vertical":n["android:orientation"]="horizontal"),o==="ImageView"&&(n["android:src"]="@drawable/placeholder",t["object-fit"]&&(t["object-fit"]==="cover"?n["android:scaleType"]="centerCrop":t["object-fit"]==="contain"&&(n["android:scaleType"]="centerInside"))),o!=="TextView"&&(t["justify-content"]==="center"||t["align-items"]==="center")){let r="";if(o==="LinearLayout"){const i=n["android:orientation"]==="vertical";t["justify-content"]==="center"&&(r+=i?"center_vertical":"center_horizontal"),t["align-items"]==="center"&&(r+=(r?"|":"")+(i?"center_horizontal":"center_vertical"))}else t["justify-content"]==="center"&&(r+="center_horizontal"),t["align-items"]==="center"&&(r+=(r?"|":"")+"center_vertical");r&&(n["android:gravity"]=r)}return n}function h(t){const o=p(t),n=u(t,o);o==="TextView"?(n["android:text"]||(n["android:text"]="@string/some_text"),n["android:id"]="@+id/some_id",t["text-align"]==="center"&&!n["android:gravity"]?.includes("center_vertical")&&(n["android:gravity"]=(n["android:gravity"]||"")+"|top")):(n["android:id"]=`@+id/view_${Math.floor(Math.random()*1e4)}`,n["xmlns:android"]="http://schemas.android.com/apk/res/android",o.includes("CardView")&&(n["xmlns:app"]="http://schemas.android.com/apk/res-auto"));const a=Object.keys(n).sort((e,r)=>{const i=l=>l.startsWith("xmlns:")?0:l==="android:id"?1:l==="android:layout_width"?2:l==="android:layout_height"?3:4;return i(e)-i(r)}).map(e=>{let r=n[e];return e==="android:gravity"&&(r.startsWith("|")&&(r=r.substring(1)),r.endsWith("|")&&(r=r.substring(0,r.length-1))),`${e}="${r}"`}).join(`
  `);return`<${o}
  ${a}
/>`}const m={name:"android-xml-style",code:{css:{title:"delete-CSS",lang:"css",transform(){return""}},js:{title:"delete-JavaScript",lang:"js",transform(){return""}},"android-xml":{title:"Android XML",lang:"xml",transform({style:t}){return h(t)}},"c-css":{title:"\u539F\u59CB\u6837\u5F0F",lang:"css",transform({style:t}){return Object.entries(t).map(([o,n])=>`${o}: ${n};`).join(`
`)}}}};export{m as default};
